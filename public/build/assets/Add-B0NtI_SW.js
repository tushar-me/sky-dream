import{p as W,u as X,a as Y,r as F,o as Z,c as n,d as ee,w as q,_ as se,e,t as c,j as m,g as z,K as ae,f as l,n as _,m as K,v as P,h as te,l as le}from"./app-473TBYcH.js";import{_ as oe}from"./LoadingButton-Cz-9oQR3.js";const re={class:"mb-10 text-primary text-xl font-medium"},ie={class:"flex items-start gap-5 my-6"},ne={class:"w-1/3 pr-2"},de={class:"w-full"},ce=e("label",{for:"serviceImage",class:"text-sm block mb-2"},"Gallery Image",-1),me={for:"serviceImage",class:"border border-primary border-dashed p-4 rounded-2xl flex items-center justify-center w-full h-52 cursor-pointer"},ue=["src"],pe={key:1,class:"flex flex-col items-center justify-center gap-2"},_e=e("small",{class:"text-xs text-center text-red-600"},"Select an image to upload Accepted formats: .jpg, .png | Max size: 1024kb | 600 * 400",-1),fe=e("span",{class:"text-primary font-semibold opacity-85 pl-6"},"Upload Service Icon",-1),be=["disabled"],xe={key:0,class:"text-red-500"},ge={class:"w-full flex flex-col gap-3"},he=e("label",{class:"text-sm block mb-2"},"Name",-1),ve=["disabled"],ye={key:0,class:"text-red-500"},we=e("label",{class:"text-sm block mb-2"},"Description",-1),ke=["disabled"],Ue={key:0,class:"text-red-500"},Ve={class:"mt-5"},je={__name:"Add",setup(Ge){const o=W(),{sendRequest:f,loading:u,error:r}=X(),H=Y(),t=F({name:null,image:null,description:null}),J=async()=>{var a,d;const s=await f({url:"/api/V1/gallery",method:"POST",data:{...t.value,id:((a=o==null?void 0:o.params)==null?void 0:a.id)??null}});b(),H.success((d=s==null?void 0:s.data)==null?void 0:d.message)},p=F(""),Q=s=>{const a=s.target.files[0];t.value.image=a,p.value=URL.createObjectURL(a)};Z(async()=>{var a;const s=await f({url:`/api/V1/gallery/${(a=o==null?void 0:o.params)==null?void 0:a.id}`,method:"GET"});b(s.data)});const b=s=>{s?(t.value.name=s==null?void 0:s.name,t.value.image=t.value.description=s.description):(t.value.name=null,t.value.image=null,t.value.description=null,p.value=null)};return(s,a)=>(n(),ee(se,null,{default:q(()=>{var d,x,g,h,v,y,w,k,U,V,G,S,$,j,C,I,N,T,B,L,M,R,A,D,E,O;return[e("form",{onSubmit:le(J,["prevent"]),class:"bg-white shadow-md p-6 max-w-5xl mx-auto"},[e("h3",re,c((x=(d=s.$route)==null?void 0:d.params)!=null&&x.id?"Edit Gallery":"Upload Gallery"),1),e("div",ie,[e("div",ne,[e("div",de,[ce,e("label",me,[p.value?(n(),m("img",{key:0,class:"w-full h-full",src:p.value,alt:""},null,8,ue)):(n(),m("span",pe,[z(ae,{name:"tabler:cloud-upload",class:"text-primary text-5xl opacity-85"}),_e,fe]))]),e("input",{class:"hidden",disabled:l(u),id:"serviceImage",type:"file",onChange:Q},null,40,be),(y=(v=(h=(g=l(r))==null?void 0:g.response)==null?void 0:h.data)==null?void 0:v.errors)!=null&&y.image?(n(),m("span",xe,c((V=(U=(k=(w=l(r))==null?void 0:w.response)==null?void 0:k.data)==null?void 0:U.errors)==null?void 0:V.image[0]),1)):_("",!0)])]),e("div",ge,[e("div",null,[he,K(e("input",{type:"text",disabled:l(u),"onUpdate:modelValue":a[0]||(a[0]=i=>t.value.name=i),class:"border disabled:bg-teal-50 border-primary rounded-md font-normal text-sm w-full focus:ring-primary focus:border-primary"},null,8,ve),[[P,t.value.name]])]),(j=($=(S=(G=l(r))==null?void 0:G.response)==null?void 0:S.data)==null?void 0:$.errors)!=null&&j.name?(n(),m("span",ye,c((T=(N=(I=(C=l(r))==null?void 0:C.response)==null?void 0:I.data)==null?void 0:N.errors)==null?void 0:T.name[0]),1)):_("",!0),e("div",null,[we,K(e("textarea",{disabled:l(u),rows:"5","onUpdate:modelValue":a[1]||(a[1]=i=>t.value.description=i),class:"border border-primary rounded-md font-normal text-sm w-full disabled:bg-teal-50 focus:ring-primary focus:border-primary"},null,8,ke),[[P,t.value.description]]),(R=(M=(L=(B=l(r))==null?void 0:B.response)==null?void 0:L.data)==null?void 0:M.errors)!=null&&R.description?(n(),m("span",Ue,c((O=(E=(D=(A=l(r))==null?void 0:A.response)==null?void 0:D.data)==null?void 0:E.errors)==null?void 0:O.description[0]),1)):_("",!0)])])]),e("div",Ve,[z(oe,{isLoading:l(u)},{default:q(()=>{var i;return[te(c((i=s.$route.params)!=null&&i.id?"Update Gallery":"Save Gallery"),1)]}),_:1},8,["isLoading"])])],32)]}),_:1}))}};export{je as default};
